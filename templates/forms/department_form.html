{% extends "base.html" %}
{% block title %}{{ form_title }} | OneGrad{% endblock %}
{% block content %}
<section class="card">
  <h2 style="margin-top: 0;">{{ form_title }}</h2>
  {% if form_hint %}
  <p class="form-hint">{{ form_hint }}</p>
  {% endif %}
  <form method="post" class="form-layout">
    {% for section in sections %}
    <div class="form-section">
      <div class="section-header">
        <h3>{{ section.title }}</h3>
        {% if section.description %}
        <p class="section-description">{{ section.description }}</p>
        {% endif %}
      </div>
      <div class="field-grid">
        {% for field in section.fields %}
        {% set value = form_values.get(field.form_name, "") %}
        {% if field.input_type == "checkbox" %}
        <div class="field checkbox-field">
          <input
            type="checkbox"
            id="{{ field.form_name }}"
            name="{{ field.form_name }}"
            {% if value in ("on", "1", "true", "True") %}checked{% endif %}
            title="{{ field.label }}"
          />
          <label for="{{ field.form_name }}">
            {{ field.label }}{% if not field.nullable %} *{% endif %}
          </label>
        </div>
        {% else %}
        <div class="field">
          <label for="{{ field.form_name }}">
            {{ field.label }}{% if not field.nullable %} *{% endif %}
          </label>
          {% if field.input_type == "select" %}
          <select
            id="{{ field.form_name }}"
            name="{{ field.form_name }}"
            {% if not field.nullable %}required{% endif %}
          >
            <option value="">Selectâ€¦</option>
            {% for option_value, option_label in (field.options if field.options is defined else []) %}
            <option value="{{ option_value }}" {% if value|string == option_value|string %}selected{% endif %}>
              {{ option_label }}
            </option>
            {% endfor %}
          </select>
          {% elif field.use_textarea %}
          <textarea
            id="{{ field.form_name }}"
            name="{{ field.form_name }}"
            placeholder="{{ field.placeholder or field.label }}"
          >{{ value }}</textarea>
          {% else %}
          <input
            type="{{ field.input_type }}"
            id="{{ field.form_name }}"
            name="{{ field.form_name }}"
            value="{{ value }}"
            {% if not field.nullable %}required{% endif %}
            placeholder="{{ field.placeholder or field.label }}"
          />
          {% endif %}
        </div>
        {% endif %}
        {% endfor %}
      </div>
    </div>
    {% endfor %}

    <div class="form-actions">
      <button type="submit">{{ submit_label }}</button>
      <a href="{{ url_for('forms.department_list') }}">Cancel</a>
    </div>
  </form>
</section>
{% endblock %}

